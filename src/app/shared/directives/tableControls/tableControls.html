<div id="controls-wrapper">
  <div class="table-controls top-row">
    <div class="col">
      <h2 ng-if="config.title">{{config.title}}</h2>
    </div>
    <div class="col action-container">
      <button id="create-btn" ng-show="showCreate" class="btn btn-create btn-primary" ng-click="onCreateClick()">{{'value.create' | translate}}</button>
    </div>
  </div>

  <div class="table-controls">
    <div class="col">
      <div class="inner-addon right">
        <input type="text" ng-model="searchQuery" placeholder="{{'table.search.placeholder' | translate}}"> </input>
        <i class="fa fa-search"></i>
      </div>
    </div>

    <div class="col action-container">
      <button id="actions-btn" ng-show="showBulkActions" class="btn" ng-click="onActionsClick()">{{'table.actions.button' | translate}}</button>
      <filter-dropdown id="table-columns-dropdown" class="btn"
        label="{{'table.columns.button' | translate}}"
        options="config.fields"
        display-path="header.display"
        value-path="name"></filter-dropdown>
    </div>
  </div>
</div>

<loading ng-if="items && !items.$resolved"></loading>
<p class="null" ng-show="!items || (items.$resolved && !items.length)">{{'table.results.none' | translate}}</p>

<p class="filtered" ng-show="filtered.length != items.length"><span translate="table.filtered.status" translate-value-count="{{filtered.length}}" translate-value-total="{{items.length}}"></span> <a ng-click="clearAllFilters()">{{'table.clear.link' | translate}}</a></p>

<table scroll-table class="table" ng-show="items.length" id="items-table">
  <thead>
    <tr>
      <th id="bulk-actions-select-table-header" ng-show="showBulkActions" class="check-col">
        <input type="checkbox" ng-model="checkAll" ng-change="toggleAll(checkAll)" />
      </th>
      <th ng-repeat="field in config.fields" ng-if="field.checked" ng-class="{'filter-header': !!field.header.options}" class="sortable-header" ng-click="sortTable(field)">
        <i ng-show="orderBy == field.name || orderBy == field.sortOn" ng-class="{'fa-arrow-up' : reverseSortOrder, 'fa-arrow-down': ! reverseSortOrder}" class="sort-icon fa pull-left"></i>
        <div ng-if="!field.header.options">{{field.header.display}}</div>
        <div ng-if="!!field.header.options" class="filter-header-content">
          <div class="filter-header-name">{{field.header.display}}</div>
          <filter-dropdown id="{{field.id}}" ng-if="(field.header.options | invoke).length" show-all="true"
            style="vertical-align:middle;text-align:right"
            ng-click="$event.stopPropagation()"
            options="field.header.options | invoke"
            value-path="{{field.header.valuePath}}"
            display-path="{{field.header.displayPath}}"
            order-by="{{field.filterOrderBy}}">
          </filter-dropdown>
        </div>
      </th>
    </tr>
  </thead>

  <tbody>
    <tr ng-repeat="item in (filtered = (items | selectedTableOptions:config.fields | search:config.searchOn:searchQuery | orderBy:orderBy:reverseSortOrder))"
      ng-class="{selected: item.id === selected.id}">
      <td id="bulk-actions-select-table-cell" ng-show="showBulkActions" class="check-col" ng-click="checkItem(item)">
        <input type="checkbox" ng-checked="item.checked"/>
      </td>

      <td ng-if="field.checked" ng-repeat="field in config.fields" ng-click="selectItem(item)">
        <table-cell ng-if="field.transclude" name="{{field.name}}" item="item"></table-cell>
        <span ng-if="!field.transclude">{{parse(item, field)}}</span>
      </td>
    </tr>
  </tbody>
</table>
