<div class="bulk-action">
  <h4><input type="checkbox" ng-model="bulkAction.checked">{{'bulkActions.change.groups' | translate}}</h4>
  <fieldset ng-repeat="action in userGroupBulkActions" ng-disabled="!bulkAction.checked">
    <select
      ng-model="action.selectedType"
      ng-options="type as type.display for type in userGroupBulkActionTypes"
      ng-change="refreshAllAffectedUsers(action)">
    </select>
    <select
      ng-model="action.selectedGroup"
      ng-options="group as group.name for group in groups"
      ng-change="refreshAllAffectedUsers(action)">
      <option disabled value="">{{'value.select.group' | translate}}</option>
    </select>
    
    <i class="fa fa-times" ng-click="bulkAction.checked && removeUserGroupBulkAction(action)"></i>
    
    <a>{{action.usersAffected.length}} {{'bulkActions.affectedUsers' | translate}}</a>
  </fieldset>
  
  <i class="fa fa-plus" ng-click="bulkAction.checked && addUserGroupBulkAction()"></i>
</div>