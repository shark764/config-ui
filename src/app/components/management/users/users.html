
<table-controls
  id="table-pane"
  config="tableConfig"
  items="users"
  selected="selectedUser"
  resource-name="user">

  <user-status name="status" ng-model="item.status"></user-status>

  <center name="state">
    <user-state state="{{item.state}}"></user-state>
  </center>
</table-controls>

<resize-handle
    ng-show="selectedUser || showBulkActions"
    id="resize-pane"
    right-element-id="right-panel"
    left-element-id="table-pane"
    left-min-width="700"
    right-min-width="300"></resize-handle>

<div id="right-panel" class="right-panel" ng-show="selectedUser || showBulkActions">

  <div class="details-pane" ng-show="selectedUser && !showBulkActions">
    <loading ng-if="! selectedUser"></loading>
    <i id="close-details-button" class="fa fa-remove remove" ng-click="closeDetails()"></i>

    <ng-form unsaved-changes-warning ng-show="selectedUser" class="details-form" name="detailsForm">

      <div class="detail-header-pane" ng-show="selectedUser.id" compiled-include="app/components/management/users/userDetailHeader.html">
      </div>

      <div class="detail-body-pane" compiled-include="app/components/management/users/userDetailBody.html">
      </div>

      <div class="detail-controls-pane">
        <input id="cancel-details-btn" ng-disabled="selectedUser.$busy" type="button" class="btn" ng-click="reset()" value="{{'value.cancel' | translate}}"></input>
        <input id="submit-details-btn" ng-show="!selectedUser.$busy" ng-click="save()" ng-disabled="(detailsForm.$pending || detailsForm.$invalid || ! detailsForm.$dirty) && !detailsForm.$error.duplicateUsername" class="btn btn-primary" type="submit" value="{{'value.submit' | translate}}" />
        <a ng-disabled="true" ng-show="selectedUser.$busy" class="btn btn-primary"><i class="fa fa-refresh fa-spin"></i></a>
      </div>
    </ng-form>
  </div>

  <bulk-action-executor class="details-pane user-ba" ng-show="showBulkActions" items="users"
    bulk-actions="bulkActions" show-bulk-actions="showBulkActions">
    <ba-set-status bulk-action="bulkActions.setStatus"></ba-set-status>
    <ba-reset-password bulk-action="bulkActions.resetPassword"></ba-reset-password>
    <ba-user-skills bulk-action="bulkActions.userSkills" users="users"></ba-user-skills>
    <ba-user-groups bulk-action="bulkActions.userGroups" users="users"></ba-user-groups>
  </bulk-action-executor>
</div>
