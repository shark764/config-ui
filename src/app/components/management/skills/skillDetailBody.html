<div class="divider-header first-header">
  <h4>{{'details' | translate}}</h4>
</div>

<div class="input-group" disable-contents="! ('MANAGE_ALL_SKILLS' | hasPermission)">
  <label>{{'value.name' | translate}}</label>
  <form-error field="forms.detailsForm.name"
    error-type-required="{{'skill.details.name.error' | translate}}">
  </form-error>
  <div>
    <input required ng-model="selectedSkill.name" name="name" type="text"></input>
  </div>

</div>

<div class="input-group" disable-contents="! ('MANAGE_ALL_SKILLS' | hasPermission)">
  <label class="textarea-label">{{'value.description' | translate}}</label>
  <div>
    <textarea ng-model="selectedSkill.description" name="description"></textarea>
  </div>
</div>

<div class="input-group" disable-contents="! ('MANAGE_ALL_SKILLS' | hasPermission)">
  <label>{{'skill.details.hasProficiency' | translate}}</label>
  <div>
    <div class="error" ng-show="forms.detailsForm.hasProficiency.$touched && forms.detailsForm.hasProficiency.$invalid">{{'skill.details.hasProficiency.error' | translate}}</div>
    <toggle ng-disabled="! ('MANAGE_ALL_SKILLS' | hasPermission) || (! selectedSkill.isNew() && selectedSkill.$original.hasProficiency)" class="status-toggle" name="hasProficiency" ng-model="selectedSkill.hasProficiency"></toggle>
  </div>
</div>

<div ng-if="!selectedSkill.isNew()">
  <div class="divider-header">
    <h4>Members
      <b class="count" translate="value.numMembers"
        translate-value-number="{{selectedSkill.fetchSkillUsers().length}}" >
      </b>
    </h4>
  </div>

  <p ng-if="selectedSkill.fetchSkillUsers().$resolved"
    class="null" id="empty-members-message" ng-hide="selectedSkill.fetchSkillUsers().length">
    {{'skill.details.members.none' | translate}}
  </p>
  
  <loading ng-if="selectedSkill.fetchSkillUsers().$resolved != undefined"
    ng-show="!selectedSkill.fetchSkillUsers().$resolved"></loading>

  <table 
    scroll-table 
    max-height="300" 
    class="table" 
    ng-show="selectedSkill.fetchSkillUsers().length > 0">
    <thead>
      <tr>
        <th>{{'value.name' | translate}}</th>
        <th>{{'value.proficiency' | translate}}</th>
        <th class="control-col"></th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="user in selectedSkill.fetchSkillUsers()">
        <td><a ng-click="gotoUserPage(user.userId)"><audit-text translation="value.displayName" user-id="user.userId"></audit-text></a></td>
        <td class="proficiency-col">{{user.proficiency}}</td>
        <td class="control-col"><i class="remove fa fa-times" ng-click="removeUser(user)"></i></td>
      </tr>
    </tbody>
  </table>
</div>

