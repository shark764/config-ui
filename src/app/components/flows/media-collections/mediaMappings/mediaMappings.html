<div class="divider-header ">
  <h4>Media Mappings</h4>
  <a id="add-media-mapping-button" class="btn pull-right" ng-click="addMapping()" title="{{'flow.details.mapping.add.alt' | translate}}"><i class="fa fa-plus"></i></a>
</div>

<input type="text" name="mediaMapChanges" ng-model="mediaMapChanges" ng-hide="true"/>

<table
  class="media-collection-table table"
  resource="collection"
  form="form"
  media-map-duplicate>
  <thead>
    <th>{{'value.identifier' | translate}}</th>
    <th>{{'value.media' | translate}}</th>
    <th>&nbsp;</th>
  </thead>
  <tbody>
    <tr ng-show="! collection.mediaMap.length"><td colspan="3"><p class="null">{{'media.collections.mapping.add' | translate}}</p></td></tr>
    <tr ng-repeat="mapping in collection.mediaMap" ng-init="editMode = false">
      <td>
        <form-error ng-init="mappingFieldName='mapping' + $index" field="form[mappingFieldName]"
          error-type-required="{{'media.collections.mappingLookup.error.required' | translate}}"
          error-type-media-map-duplicate="{{'media.collections.mappingLookup.error.duplicate' | translate}}">
        </form-error>
        <input
          ng-change="'{{mapping.lookup}}' == collection.defaultMediaKey ? resetDefaultMediaKey() : ''"
          ng-required="true"
          type="text"
          name="{{mappingFieldName}}"
          ng-model="mapping.lookup" />
      </td>
      <td>
        <form-error ng-init="fieldName='source' + $index" field="form[fieldName]"
          error-type-required="{{'media.collections.mappingId.error' | translate}}"></form-error>
        <lo-multibox model="mapping" items="fetchMedias()" resource-name="media" property-name="id" name="{{fieldName}}"></lo-multibox>
      </td>
      <td class='remove-col'>
        <i id="remove-media-mapping-button" class="fa fa-times remove" ng-click="removeMapping($index)"></i>
      </td>
    </tr>
  </tbody>
</table>
