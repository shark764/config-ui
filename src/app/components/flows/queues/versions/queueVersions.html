<div class="input-group">
  <label>{{'queue.details.activeVersion' | translate}}</label>
  <div>
    <form-error field="detailsForm.activeVersion"
    error-type-required="{{'queue.details.version.error' | translate}}"></form-error>
    <select ng-disabled="! ('MANAGE_ALL_QUEUES' | hasPermission)" api-error ng-required="true" ng-model="currVersion" ng-change="currVersionChanged()" ng-options="version.name for version in versions | orderBy:'created':'reverse'">
    </select>
  </div>
</div>

<div class="divider-header">
  <h4>Versions</h4>
  <a class="btn pull-right" title="Create new version" ng-click="addQueueVersion()"><i class="fa fa-plus"></i></a>
</div>

<div class="queue-version-table">
  <table class="table">
    <thead>
      <th></th>
      <th>{{'value.version' | translate}}</th>
      <th>{{'value.createdOn' | translate}}</th>
      <th ng-if="['PLATFORM_VIEW_ALL_USERS', 'PLATFORM_CREATE_USERS', 'PLATFORM_MANAGE_ALL_USERS', 'PLATFORM_MANAGE_ALL_TENANTS', 'PLATFORM_MANAGE_ALL_TENANTS_ENROLLMENT'] | hasPermission">
        {{'queue.details.createdBy' | translate}}
      </th>
      <th></th>
    </thead>
    <tr ng-repeat-start="version in versions | orderBy:'created':'reverse'" id="version-row-{{version.name}}">
      <td><i ng-if="version.id == currVersion.id" class="fa fa-circle" title="Currently active version"></i></td>
      <td>
        {{version.name}}
      </td>
      <td>{{version.created | date:'medium'}}</td>
      <td ng-if="['PLATFORM_VIEW_ALL_USERS', 'PLATFORM_CREATE_USERS', 'PLATFORM_MANAGE_ALL_USERS', 'PLATFORM_MANAGE_ALL_TENANTS', 'PLATFORM_MANAGE_ALL_TENANTS_ENROLLMENT'] | hasPermission">
        <audit-text translation="value.displayName" user-id="version.createdBy"></audit-text>
      </td>
      <td><i class="fa" ng-class="{'fa-caret-down' : !version.viewing, 'fa-caret-up': version.viewing}" ng-click="toggleDetails(version);" title="{{'queue.details.version.expand' | translate}}"></i></td>
    </tr>
    <tr ng-repeat-end id="view-version-{{version.name}}">
      <td></td>
      <td colspan="5" ng-show="version.viewing">

        <div disable-contents="! ('MANAGE_ALL_QUEUES' | hasPermission)">
          <div class="input-group">
            <label class="textarea-label disabled">{{'value.details.query' | translate}}</label>
            <textarea ng-disabled="true" type="text" ng-model="version.query" name="query"></textarea>
          </div>
  
          <div class="input-group">
            <label class="disabled">{{'queue.details.startingpriority' | translate}}</label>
            <div>
              <input id="selected-version-priority" type="number" disabled value="75"></input>
            </div>
          </div>
  
          <div class="input-group">
            <label class="disabled">{{'queue.details.rateofincrease' | translate}}</label>
            <div>
              <input id="selected-version-rate" type="number" disabled value="2"></input>
            </div>
            <div>
              <select id="selected-version-rate-units" disabled>
                <option disabled value="min">mins</option>
              </select>
            </div>
          </div>
        </div>
      </td>
    </tr>
  </table>
</div>
